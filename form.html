<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QPaper AI - Syllabus Selection</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes subtleShine {
      0% {
        background-position: -200% 0;
      }

      100% {
        background-position: 200% 0;
      }
    }

    .animate-subtleShine {
      background-size: 200% auto;
      animation: subtleShine 5s linear infinite;
    }

    body {
      font-family: 'Inter', sans-serif;
    }

    select:disabled {
      background-color: #f9fafb;
      cursor: not-allowed;
    }
  </style>
</head>

<body class="bg-gray-100 min-h-screen flex items-center justify-center px-4 py-10">
  <div class="w-full max-w-3xl bg-white shadow-2xl rounded-3xl p-10 space-y-10 transition-all duration-300">

    <!-- Header -->
    <div class="space-y-1 text-center">
      <h1 class="text-4xl font-extrabold text-blue-600 tracking-tight">QPaper AI</h1>
      <h2 class="text-2xl font-semibold text-gray-800">Syllabus Selection</h2>
      <p class="text-sm text-gray-500">Follow the steps below to configure your paper</p>
    </div>

    <!-- Ultra Modern Progress Bar -->
    <div class="w-full mb-8">
      <div class="flex justify-between items-center mb-2">
        <span id="progressLabel" class="text-sm font-semibold text-gray-700">Step 1 of 4</span>
        <span id="progressPercent" class="text-sm font-semibold text-gray-500">25%</span>
      </div>
      <div class="w-full relative h-4 bg-gray-200/60 rounded-full overflow-hidden">
        <!-- Background Subtle Shine -->
        <div class="absolute inset-0 bg-gradient-to-r from-white/40 to-transparent opacity-30 animate-subtleShine">
        </div>
        <!-- Progress Fill -->
        <div id="progressBar"
          class="h-4 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-500 ease-in-out"
          style="width: 25%;"></div>
      </div>
    </div>


    <!-- Step 1 -->
    <div id="page-1" class="space-y-6">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Grade</label>
        <select name="grade"
          class="w-full border border-gray-300 rounded-lg p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
          <option value="">Select Grade</option>
          <option>Grade 6</option>
          <option>Grade 7</option>
          <option>Grade 8</option>
          <option>Grade 9</option>
          <option>Grade 10</option>
          <option>Grade 11</option>
          <option>Grade 12</option>
        </select>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Subject</label>
        <select name="subject"
          class="w-full border border-gray-300 rounded-lg p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
          <option value="">Select Subject</option>
          <option>Biology</option>
          <option>Chemistry</option>
          <option>Physics</option>
          <option>Mathematics</option>
          <option>History</option>
          <option>Geography</option>
        </select>
      </div>
    </div>

    <!-- Step 2 -->
    <div id="page-2" class="space-y-6 hidden">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Chapter</label>
        <select name="chapter" id="chapterDropdown"
          class="w-full border border-gray-300 rounded-lg p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
          <option value="">Select Chapter</option>
          <option value="1">Chapter 1: Introduction</option>
          <option value="2">Chapter 2: Cell Structure</option>
          <option value="3">Chapter 3: Photosynthesis</option>
        </select>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Sections</label>
        <select id="sectionDropdown"
          class="w-full border border-gray-300 rounded-lg p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
          disabled>
          <option value="">Select Chapter First</option>
        </select>

        <div id="selectedSectionsContainer" class="flex flex-wrap gap-2 mt-4">
          <!-- Bubbles will appear here -->
        </div>
      </div>
    </div>

    <!-- Step 3 -->
    <div id="page-3" class="space-y-6 hidden">
      <div>
        <h3 class="text-lg font-semibold text-gray-800">Question Types and Counts</h3>
        <p class="text-sm text-gray-500 mb-4">Enter how many of each question type you'd like.</p>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
          <div>
            <label class="block text-sm font-medium text-gray-700">Single Correct MCQs</label>
            <input name="mcqSingle" type="number" min="0"
              class="mt-1 w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
              placeholder="e.g. 5" />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700">Multiple Correct MCQs</label>
            <input name="mcqMultiple" type="number" min="0"
              class="mt-1 w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
              placeholder="e.g. 3" />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700">Answer in One Sentence</label>
            <input name="oneSentence" type="number" min="0"
              class="mt-1 w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
              placeholder="e.g. 4" />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700">Answer in Brief</label>
            <input name="brief" type="number" min="0"
              class="mt-1 w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
              placeholder="e.g. 2" />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700">Answer in Detail</label>
            <input name="detail" type="number" min="0"
              class="mt-1 w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
              placeholder="e.g. 1" />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700">Fill in the Blanks</label>
            <input name="fillBlanks" type="number" min="0"
              class="mt-1 w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500"
              placeholder="e.g. 6" />
          </div>
        </div>


        <!-- difficulty slider -->

        <div class="mt-8 p-6 bg-white rounded-2xl border border-gray-100 shadow-lg">
          <label for="difficulty" class="block text-sm font-semibold text-gray-800 mb-4">
            Difficulty Level
            <span class="text-gray-400 font-normal text-xs">(1 = easiest, 10 = hardest)</span>
          </label>

          <div class="relative flex items-center">
            <input type="range" id="difficulty" name="difficulty" min="1" max="10" value="5"
              class="w-full h-2 rounded-full appearance-none cursor-pointer" oninput="updateSlider(this)" />

            <!-- Tooltip bubble -->
            <div id="difficultyBubble"
              class="absolute -top-12 backdrop-blur-md bg-blue-600/90 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg transform -translate-x-1/2 transition-all duration-200 scale-100"
              style="left: 50%;">
              5
            </div>
          </div>

          <div class="flex justify-between mt-3 text-xs text-gray-500 font-medium tracking-wide">
            <span>Easy</span>
            <span>Medium</span>
            <span>Hard</span>
          </div>
        </div>

        <style>
          /* Dynamic background for slider */
          input[type="range"] {
            background: linear-gradient(to right, #3b82f6 50%, #e5e7eb 50%);
            border-radius: 9999px;
            transition: background 0.25s ease;
          }

          /* Remove default styles */
          input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            height: 22px;
            width: 22px;
            background: white;
            border: 3px solid #2563eb;
            border-radius: 50%;
            box-shadow: 0 4px 10px rgba(37, 99, 235, 0.4);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
          }

          input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.25);
            box-shadow: 0 6px 14px rgba(37, 99, 235, 0.6);
          }

          input[type="range"]::-moz-range-thumb {
            height: 22px;
            width: 22px;
            background: white;
            border: 3px solid #2563eb;
            border-radius: 50%;
            box-shadow: 0 4px 10px rgba(37, 99, 235, 0.4);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
          }

          input[type="range"]::-moz-range-thumb:hover {
            transform: scale(1.25);
            box-shadow: 0 6px 14px rgba(37, 99, 235, 0.6);
          }

          /* Tooltip pop animation */
          @keyframes pop {
            0% {
              transform: translateX(-50%) scale(1);
            }

            50% {
              transform: translateX(-50%) scale(1.25);
            }

            100% {
              transform: translateX(-50%) scale(1);
            }
          }
        </style>

        <script>
          function updateSlider(slider) {
            const value = slider.value;
            const min = slider.min;
            const max = slider.max;
            const percent = ((value - min) / (max - min)) * 100;

            // Update gradient fill
            slider.style.background = `linear-gradient(to right, #3b82f6 ${percent}%, #e5e7eb ${percent}%)`;

            // Update tooltip position & text
            const bubble = document.getElementById("difficultyBubble");
            bubble.textContent = value;
            bubble.style.left = `calc(${percent}% + (${8 - percent * 0.15}px))`;

            // Trigger pop animation
            bubble.style.animation = "none";
            bubble.offsetHeight; // trigger reflow
            bubble.style.animation = "pop 0.3s ease";
          }
          updateSlider(document.getElementById("difficulty"));
        </script>



      </div>
    </div>

    <!-- Step 4: Marking Scheme -->
    <div id="page-4" class="space-y-10 hidden">
      <div>
        <h3 class="text-xl font-semibold text-gray-900">Marking Scheme</h3>
        <p class="text-sm text-gray-500 mt-1">
          Define the marks awarded and deducted for each type of question.
        </p>

        <div class="space-y-10 mt-6">

          <!-- --- MCQs Section --- -->
          <div>
            <h4 class="text-sm font-semibold text-gray-700 flex items-center gap-2 border-b border-gray-200 pb-2">
              <span class="text-blue-500"></span> Multiple Choice Questions
            </h4>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mt-4">
              <!-- Single Correct -->
              <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
                <label class="block text-sm font-semibold text-gray-800 mb-2">Single Correct (Correct)</label>
                <input name="marks_mcqSingle_correct" type="number" step="0.5"
                  class="w-full border border-gray-300 rounded-lg p-3 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
                  placeholder="e.g. 1" />
              </div>

              <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
                <label class="block text-sm font-semibold text-gray-800 mb-2">Single Correct (Wrong)</label>
                <input name="marks_mcqSingle_wrong" type="number" step="0.5"
                  class="w-full border border-gray-300 rounded-lg p-3 shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 transition"
                  placeholder="e.g. -0.25" />
                <p class="text-xs text-gray-400 mt-1">Use negative value for penalty</p>
              </div>

              <!-- Multiple Correct -->
              <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
                <label class="block text-sm font-semibold text-gray-800 mb-2">Multiple Correct (Correct)</label>
                <input name="marks_mcqMultiple_correct" type="number" step="0.5"
                  class="w-full border border-gray-300 rounded-lg p-3 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
                  placeholder="e.g. 2" />
              </div>

              <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
                <label class="block text-sm font-semibold text-gray-800 mb-2">Multiple Correct (Wrong)</label>
                <input name="marks_mcqMultiple_wrong" type="number" step="0.5"
                  class="w-full border border-gray-300 rounded-lg p-3 shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 transition"
                  placeholder="e.g. -0.5" />
              </div>

              <!-- Fill in the Blanks -->
              <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
                <label class="block text-sm font-semibold text-gray-800 mb-2">Fill in the Blanks (Correct)</label>
                <input name="marks_fillBlanks_correct" type="number" step="0.5"
                  class="w-full border border-gray-300 rounded-lg p-3 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
                  placeholder="e.g. 1" />
              </div>

              <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
                <label class="block text-sm font-semibold text-gray-800 mb-2">Fill in the Blanks (Wrong)</label>
                <input name="marks_fillBlanks_wrong" type="number" step="0.5"
                  class="w-full border border-gray-300 rounded-lg p-3 shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 transition"
                  placeholder="e.g. -0.25" />
                <p class="text-xs text-gray-400 mt-1">Use negative value for penalty</p>
              </div>
            </div>
          </div>

          <!-- --- Descriptive Section --- -->
          <div>
            <h4 class="text-sm font-semibold text-gray-700 flex items-center gap-2 border-b border-gray-200 pb-2">
              <span class="text-green-500"></span> Descriptive Questions
            </h4>

            <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 mt-4">

              <!-- One Sentence -->
              <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
                <label class="block text-sm font-semibold text-gray-800 mb-2">One Sentence</label>
                <input name="marks_oneSentence" type="number" step="0.5"
                  class="w-full border border-gray-300 rounded-lg p-3 shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 transition"
                  placeholder="e.g. 1" />
              </div>

              <!-- Brief -->
              <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
                <label class="block text-sm font-semibold text-gray-800 mb-2">Brief Answer</label>
                <input name="marks_brief" type="number" step="0.5"
                  class="w-full border border-gray-300 rounded-lg p-3 shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 transition"
                  placeholder="e.g. 3" />
              </div>

              <!-- Detailed -->
              <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
                <label class="block text-sm font-semibold text-gray-800 mb-2">Detailed Answer</label>
                <input name="marks_detail" type="number" step="0.5"
                  class="w-full border border-gray-300 rounded-lg p-3 shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 transition"
                  placeholder="e.g. 5" />
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>


    <!-- Step 5: Review -->
    <div id="page-5" class="space-y-6 hidden">
      <h3 class="text-2xl font-bold text-gray-800 text-center">Review Your Selections</h3>
      <div class="bg-white shadow-md rounded-xl p-6 space-y-6">

        <!-- General Selections -->
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">

          <!-- Grade -->
          <div class="bg-gray-50 rounded-lg p-3 shadow-sm hover:shadow-md transition duration-200 text-center">
            <p class="text-xs uppercase text-gray-500 tracking-wider mb-1">Grade</p>
            <p id="review-grade" class="text-lg font-semibold text-gray-800">—</p>
          </div>

          <!-- Subject -->
          <div class="bg-gray-50 rounded-lg p-3 shadow-sm hover:shadow-md transition duration-200 text-center">
            <p class="text-xs uppercase text-gray-500 tracking-wider mb-1">Subject</p>
            <p id="review-subject" class="text-lg font-semibold text-gray-800">—</p>
          </div>

          <!-- Chapter -->
          <div class="bg-gray-50 rounded-lg p-3 shadow-sm hover:shadow-md transition duration-200 text-center">
            <p class="text-xs uppercase text-gray-500 tracking-wider mb-1">Chapter</p>
            <p id="review-chapter" class="text-lg font-semibold text-gray-800">—</p>
          </div>

          <!-- Sections -->
          <div
            class="bg-gray-50 rounded-lg p-4 shadow-sm hover:shadow-md transition duration-200 col-span-1 sm:col-span-3">
            <p class="text-xs uppercase text-gray-500 tracking-wider mb-4">Sections</p>
            <div id="review-section" class="flex flex-col gap-3">
              <span
                class="inline-flex items-center bg-blue-100 text-blue-700 text-sm font-medium px-4 py-2 rounded-full w-full">
                6.1.1 Epidermal Tissue System
              </span>
              <span
                class="inline-flex items-center bg-blue-100 text-blue-700 text-sm font-medium px-4 py-2 rounded-full w-full">
                6.2.1 Dicotyledonous Root
              </span>
              <span
                class="inline-flex items-center bg-blue-100 text-blue-700 text-sm font-medium px-4 py-2 rounded-full w-full">
                6.3.1 The Vascular Tissue System
              </span>
            </div>
          </div>
        </div>

        <!-- Divider for Questions Requested -->
        <div class="flex items-center justify-between">
          <h4 class="text-sm font-bold text-blue-700 uppercase tracking-wider">Questions Requested</h4>
          <div class="flex-grow border-t border-gray-200 ml-4"></div>
        </div>

        <!-- Questions Selection -->
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div class="bg-white border border-gray-200 rounded-lg p-4 flex justify-between items-center">
            <span class="text-gray-700 font-medium">Single Correct MCQs</span>
            <span id="review-mcqSingle"
              class="bg-blue-100 text-blue-700 text-sm font-semibold px-3 py-1 rounded-full">—</span>
          </div>
          <div class="bg-white border border-gray-200 rounded-lg p-4 flex justify-between items-center">
            <span class="text-gray-700 font-medium">Multiple Correct MCQs</span>
            <span id="review-mcqMultiple"
              class="bg-blue-100 text-blue-700 text-sm font-semibold px-3 py-1 rounded-full">—</span>
          </div>
          <div class="bg-white border border-gray-200 rounded-lg p-4 flex justify-between items-center">
            <span class="text-gray-700 font-medium">Fill in the Blanks</span>
            <span id="review-fillBlanks"
              class="bg-blue-100 text-blue-700 text-sm font-semibold px-3 py-1 rounded-full">—</span>
          </div>
          <div class="bg-white border border-gray-200 rounded-lg p-4 flex justify-between items-center">
            <span class="text-gray-700 font-medium">One Sentence Answers</span>
            <span id="review-oneSentence"
              class="bg-blue-100 text-blue-700 text-sm font-semibold px-3 py-1 rounded-full">—</span>
          </div>
          <div class="bg-white border border-gray-200 rounded-lg p-4 flex justify-between items-center">
            <span class="text-gray-700 font-medium">Brief Answers</span>
            <span id="review-brief"
              class="bg-blue-100 text-blue-700 text-sm font-semibold px-3 py-1 rounded-full">—</span>
          </div>
          <div class="bg-white border border-gray-200 rounded-lg p-4 flex justify-between items-center">
            <span class="text-gray-700 font-medium">Detailed Answers</span>
            <span id="review-detail"
              class="bg-blue-100 text-blue-700 text-sm font-semibold px-3 py-1 rounded-full">—</span>
          </div>
        </div>

        <!-- Divider for Marking Scheme -->
        <div class="flex items-center justify-between mt-6">
          <h4 class="text-sm font-bold text-blue-700 uppercase tracking-wider">Marking Scheme</h4>
          <div class="flex-grow border-t border-gray-200 ml-4"></div>
        </div>

        <!-- Marking Scheme Review -->
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div class="bg-white border border-gray-200 rounded-lg p-4 flex justify-between items-center">
            <span class="text-gray-700 font-medium">Single Correct (Correct)</span>
            <span id="review-marks-mcqSingle-correct"
              class="bg-green-100 text-green-700 text-sm font-semibold px-3 py-1 rounded-full">—</span>
          </div>
          <div class="bg-white border border-gray-200 rounded-lg p-4 flex justify-between items-center">
            <span class="text-gray-700 font-medium">Single Correct (Wrong)</span>
            <span id="review-marks-mcqSingle-wrong"
              class="bg-red-100 text-red-700 text-sm font-semibold px-3 py-1 rounded-full">—</span>
          </div>
          <div class="bg-white border border-gray-200 rounded-lg p-4 flex justify-between items-center">
            <span class="text-gray-700 font-medium">Multiple Correct (Correct)</span>
            <span id="review-marks-mcqMultiple-correct"
              class="bg-green-100 text-green-700 text-sm font-semibold px-3 py-1 rounded-full">—</span>
          </div>
          <div class="bg-white border border-gray-200 rounded-lg p-4 flex justify-between items-center">
            <span class="text-gray-700 font-medium">Multiple Correct (Wrong)</span>
            <span id="review-marks-mcqMultiple-wrong"
              class="bg-red-100 text-red-700 text-sm font-semibold px-3 py-1 rounded-full">—</span>
          </div>

          <div class="bg-white border border-gray-200 rounded-lg p-4 flex justify-between items-center">
            <span class="text-gray-700 font-medium">Fill in the Blanks (Correct)</span>
            <span id="review-marks-fillBlanks-correct"
              class="bg-green-100 text-green-700 text-sm font-semibold px-3 py-1 rounded-full">—</span>
          </div>
          <div class="bg-white border border-gray-200 rounded-lg p-4 flex justify-between items-center">
            <span class="text-gray-700 font-medium">Fill in the Blanks (Wrong)</span>
            <span id="review-marks-fillBlanks-wrong"
              class="bg-red-100 text-red-700 text-sm font-semibold px-3 py-1 rounded-full">—</span>
          </div>

          <div class="bg-white border border-gray-200 rounded-lg p-4 flex justify-between items-center">
            <span class="text-gray-700 font-medium">One Sentence</span>
            <span id="review-marks-oneSentence"
              class="bg-blue-100 text-blue-700 text-sm font-semibold px-3 py-1 rounded-full">—</span>
          </div>
          <div class="bg-white border border-gray-200 rounded-lg p-4 flex justify-between items-center">
            <span class="text-gray-700 font-medium">Brief Answer</span>
            <span id="review-marks-brief"
              class="bg-blue-100 text-blue-700 text-sm font-semibold px-3 py-1 rounded-full">—</span>
          </div>
          <div class="bg-white border border-gray-200 rounded-lg p-4 flex justify-between items-center">
            <span class="text-gray-700 font-medium">Detailed Answer</span>
            <span id="review-marks-detail"
              class="bg-blue-100 text-blue-700 text-sm font-semibold px-3 py-1 rounded-full">—</span>
          </div>
        </div>


        <!-- Review Difficulty Section -->
        <div class="flex items-center justify-between mt-6">
          <h4 class="text-sm font-bold text-blue-700 uppercase tracking-wider">Difficulty Level</h4>
          <div class="flex-grow border-t border-gray-200 ml-4"></div>
        </div>

        <div class="bg-white border border-gray-200 rounded-lg p-4 flex justify-between items-center">
          <span class="text-gray-700 font-medium">Selected Difficulty</span>
          <span id="review-difficulty"
            class="bg-blue-100 text-blue-700 text-sm font-semibold px-3 py-1 rounded-full">—</span>
        </div>

        <script>
          const difficultySlider = document.getElementById("difficulty");
          const reviewDifficulty = document.getElementById("review-difficulty");

          function getDifficultyLabel(value) {
            if (value <= 3) return "Easy";
            if (value <= 7) return "Medium";
            return "Hard";
          }

          function updateReviewDifficulty() {
            const value = difficultySlider.value;
            const label = getDifficultyLabel(Number(value));
            reviewDifficulty.textContent = `${label} (${value})`;
          }

          difficultySlider.addEventListener("input", updateReviewDifficulty);
          updateReviewDifficulty();
        </script>
      </div>
    </div>


    <!-- Navigation Buttons -->
    <div class="flex justify-between items-center pt-4 border-t mt-6">
      <button id="backBtn"
        class="hidden bg-gray-100 text-gray-700 font-medium py-2 px-5 rounded-lg hover:bg-gray-200 transition">←
        Back</button>
      <button id="nextBtn"
        class="ml-auto bg-blue-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-blue-700 transition">Next
        →</button>
    </div>
  </div>

  <script>
    const pages = ["page-1", "page-2", "page-3", "page-4", "page-5"];

    let currentPage = 0;

    const backBtn = document.getElementById("backBtn");
    const nextBtn = document.getElementById("nextBtn");

    const selectors = {
      grade: 'select[name="grade"]',
      subject: 'select[name="subject"]',
      chapter: 'select[name="chapter"]',
      mcqSingle: 'input[name="mcqSingle"]',
      mcqMultiple: 'input[name="mcqMultiple"]',
      oneSentence: 'input[name="oneSentence"]',
      brief: 'input[name="brief"]',
      detail: 'input[name="detail"]'
    };

    const chapterDropdown = document.getElementById("chapterDropdown");
    const sectionDropdown = document.getElementById("sectionDropdown");
    const selectedSectionsContainer = document.getElementById("selectedSectionsContainer");
    const selectedSections = new Set();

    const subjectChapterSectionMap = {
      Biology: {
        "1": { title: "The Living World", sections: [] },
        "2": { title: "Biological Classification", sections: [] },
        "3": { title: "Plant Kingdom", sections: [] },
        "4": { title: "Animal Kingdom", sections: [] },
        "5": { title: "Morphology of Flowering Plants", sections: [] },
        "6": {
          title: "Anatomy of Flowering Plants", sections: [
            "6.1.1 Epidermal Tissue System",
            "6.1.2 The Ground Tissue System",
            "6.1.3 The Vascular Tissue System",
            "6.2.1 Dicotyledonous Root",
            "6.2.2 Monocotyledonous Root",
            "6.2.3 Dicotyledonous Stem",
            "6.2.4 Monocotyledonous Stem",
            "6.2.5 Dorsiventral (Dicotyledonous) Leaf",
            "6.2.6 Isobilateral (Monocotyledonous) Leaf"
          ]
        },
        "7": { title: "Structural Organisation in Animals", sections: [] },
        "8": { title: "Cell: The Unit of Life", sections: [] },
        "9": { title: "Biomolecules", sections: [] },
        "10": { title: "Cell Cycle and Cell Division", sections: [] },
        "11": { title: "Photosynthesis in Higher Plants", sections: [] },
        "12": { title: "Respiration in Plants", sections: [] },
        "13": { title: "Plant Growth and Development", sections: [] },
        "14": { title: "Breathing and Exchange of Gases", sections: [] },
        "15": { title: "Body Fluids and Circulation", sections: [] },
        "16": { title: "Excretory Products and Their Elimination", sections: [] },
        "17": { title: "Locomotion and Movement", sections: [] },
        "18": { title: "Neural Control and Coordination", sections: [] },
        "19": { title: "Chemical Coordination and Integration", sections: [] }
      },


      Chemistry: {
        "1": { title: "Atomic Structure", sections: ["1.1 Dalton’s Theory", "1.2 Rutherford Model"] },
        "2": { title: "Chemical Bonding", sections: ["2.1 Ionic Bonds", "2.2 Covalent Bonds"] }
      }
      // Add more subjects and chapters here
    };

    const subjectDropdown = document.querySelector(selectors.subject);

    subjectDropdown.addEventListener("change", () => {
      const selectedSubject = subjectDropdown.value;
      chapterDropdown.innerHTML = '<option value="">Select Chapter</option>';
      sectionDropdown.innerHTML = '<option value="">Select Chapter First</option>';
      selectedSections.clear();
      selectedSectionsContainer.innerHTML = "";
      sectionDropdown.disabled = true;

      if (subjectChapterSectionMap[selectedSubject]) {
        const chapters = subjectChapterSectionMap[selectedSubject];
        for (const chapterNum in chapters) {
          const option = document.createElement("option");
          option.value = chapterNum;
          option.textContent = `Chapter ${chapterNum}: ${chapters[chapterNum].title}`;
          chapterDropdown.appendChild(option);
        }
        chapterDropdown.disabled = false;
      } else {
        chapterDropdown.disabled = true;
      }
    });

    chapterDropdown.addEventListener("change", () => {
      const selectedSubject = subjectDropdown.value;
      const selectedChapter = chapterDropdown.value;

      sectionDropdown.innerHTML = '<option value="">Select Section</option>';
      selectedSections.clear();
      selectedSectionsContainer.innerHTML = "";

      if (subjectChapterSectionMap[selectedSubject] && subjectChapterSectionMap[selectedSubject][selectedChapter]) {
        const sections = subjectChapterSectionMap[selectedSubject][selectedChapter].sections;
        sections.forEach(sec => {
          const opt = document.createElement("option");
          opt.value = sec;
          opt.textContent = sec;
          sectionDropdown.appendChild(opt);
        });
        sectionDropdown.disabled = false;
      } else {
        sectionDropdown.disabled = true;
        sectionDropdown.innerHTML = '<option value="">Select Chapter First</option>';
      }
    });


    sectionDropdown.addEventListener("change", () => {
      const selected = sectionDropdown.value;
      if (selected && !selectedSections.has(selected)) {
        selectedSections.add(selected);
        renderSelectedSections();
      }
      sectionDropdown.selectedIndex = 0;
    });

    function renderSelectedSections() {
      selectedSectionsContainer.innerHTML = "";
      [...selectedSections].forEach(section => {
        const bubble = document.createElement("div");
        bubble.className = "flex items-center bg-blue-100 text-blue-700 rounded-full px-4 py-1 text-sm font-medium shadow-sm";
        bubble.innerHTML = `
            <span>${section}</span>
            <button onclick="removeSection('${section}')" class="ml-2 text-blue-500 hover:text-red-500 font-bold">&times;</button>
          `;
        selectedSectionsContainer.appendChild(bubble);
      });
    }

    function removeSection(section) {
      selectedSections.delete(section);
      renderSelectedSections();
    }

    function populateReview() {
      for (const key in selectors) {
        const input = document.querySelector(selectors[key]);
        document.getElementById("review-" + key).textContent = input.value || "—";
      }
      document.getElementById("review-section").textContent = [...selectedSections].join(", ") || "—";
    }

    function updatePage() {
      pages.forEach((id, index) => {
        document.getElementById(id).classList.toggle("hidden", index !== currentPage);
      });
      backBtn.classList.toggle("hidden", currentPage === 0);
      nextBtn.textContent = currentPage === pages.length - 1 ? "Submit" : "Next →";
      if (currentPage === pages.length - 1) populateReview();
    }

    nextBtn.addEventListener("click", () => {
      if (currentPage < pages.length - 1) {
        currentPage++;
        updatePage();
      } else {
        // Collect form data
        const data = collectFormData();
        const json = JSON.stringify(data, null, 2);

        // Create and trigger download
        const blob = new Blob([json], { type: "application/json" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "qpaper_config.json";
        a.click();
        URL.revokeObjectURL(url);

        // Then optionally redirect
        window.location.href = "thank_you.html";
      }
    });

    backBtn.addEventListener("click", () => {
      if (currentPage > 0) {
        currentPage--;
        updatePage();
      }
    });

    updatePage();

    function collectFormData() {
      return {
        grade: document.querySelector(selectors.grade).value,
        subject: document.querySelector(selectors.subject).value,
        chapter: document.querySelector(selectors.chapter).value,
        sections: [...selectedSections],
        mcqSingle: document.querySelector(selectors.mcqSingle).value,
        mcqMultiple: document.querySelector(selectors.mcqMultiple).value,
        oneSentence: document.querySelector(selectors.oneSentence).value,
        brief: document.querySelector(selectors.brief).value,
        detail: document.querySelector(selectors.detail).value,
        markingScheme: {
          mcqSingle: {
            correct: document.querySelector('input[name="marks_mcqSingle_correct"]').value,
            wrong: document.querySelector('input[name="marks_mcqSingle_wrong"]').value
          },
          mcqMultiple: {
            correct: document.querySelector('input[name="marks_mcqMultiple_correct"]').value,
            wrong: document.querySelector('input[name="marks_mcqMultiple_wrong"]').value
          },
          oneSentence: document.querySelector('input[name="marks_oneSentence"]').value,
          brief: document.querySelector('input[name="marks_brief"]').value,
          detail: document.querySelector('input[name="marks_detail"]').value
        }
      };
    }


    function updatePage() {
      pages.forEach((id, index) => {
        document.getElementById(id).classList.toggle("hidden", index !== currentPage);
      });
      backBtn.classList.toggle("hidden", currentPage === 0);
      nextBtn.textContent = currentPage === pages.length - 1 ? "Submit" : "Next →";
      if (currentPage === pages.length - 1) populateReview();

      const progressPercent = Math.round(((currentPage + 1) / pages.length) * 100);
      document.getElementById("progressBar").style.width = `${progressPercent}%`;
      document.getElementById("progressLabel").textContent = `Step ${currentPage + 1} of ${pages.length}`;
      document.getElementById("progressPercent").textContent = `${progressPercent}%`;
    }

  </script>
</body>

</html>